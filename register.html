<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>BestTrip Travel Agency</title>

        <link rel="stylesheet" type="text/css" href="css/style.css" />
        <link rel="stylesheet" type="text/css" href="css/menu.css" />
        <script type="text/javascript" src="js/jquery-latest.min.js">
        </script>
        <script >
            $(function () {

                $('#menu li').hover(function () {
                    var _this = $(this),
                            _subnav = _this.children('ul');
                    _this.css('backgroundColor', '#fff');
                    _subnav.stop(true, true).fadeIn(400);
                }, function () {
                    $(this).css('backgroundColor', '').children('ul').stop(true, true).fadeOut(400);
                });
                $('a').focus(function () {
                    this.blur();
                });
            });
        </script>
        <script type="text/javascript" src="js/jquery-1.11.1.js"></script>
        <script>

            $(document).ready(function () {

                $("#login").click(function () {
                    var name = $('#userName').val();
                    var password = $("#password").val();
                    if (name == "" || password == "") {
                        alert("Please input userName and Password");
                    } else {
                        if (localStorage["db"] != null) {

                            try {
                                var JSONdb = JSON.parse(localStorage["db"]);
                            } catch (err) {

                            }
                            var i = JSONdb.login.length + 1;
                            JSONdb.login.push({"id": i, "username": name, "password": password, "position": "admin"});
                            localStorage["db"] = JSON.stringify(JSONdb);
                            console.log(localStorage.getItem("db"));
                            location.href = "login.html";
                        } else {
                            $.getJSON('js/db.json', function (jd) {
                                var i = jd.login.length + 1;
                                jd['login'].push({"id": i, "username": name, "password": password, "position": "admin"});
                                alert("Please login First");
                                localStorage["db"] = JSON.stringify(jd);
                                console.log(localStorage["db"]);
                                location.href = "login.html";
                            });
                        }
                    }

                });
            });
        </script>

    </head>

    <body>

        <div style="padding:10px">
            <div class="input_field">

                <table>
                    <tr>
                        <th>UserName: </th>
                        <td><input type="text" id="userName" /></td>
                    </tr>
                    <tr>
                        <th>Password: </th>
                        <td><input type="password" id="password" /></td>
                    </tr>
                    <tr><td align="right" colspan="2"><input type="submit" value="Sign up" id="login" /></td></tr>
                </table>
            </div>

        </div>


    </body>
</html>
